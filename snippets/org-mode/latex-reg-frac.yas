# -*- mode: snippet -*-
# name: Smart fraction conversion
# key: //
# condition: (and (my/in-latex-context-p) 'auto)
# type: command
# --
(yas-expand-snippet
 (if (string-match "\\([a-zA-Z0-9_{}]+\\)/\\([a-zA-Z0-9_{}]+\\)$" 
                   (buffer-substring-no-properties (line-beginning-position) (point)))
     (progn
       (delete-region (+ (line-beginning-position) (match-beginning 0)) (point))
       "\\\\frac{${1:numerator}}{${2:denominator}}$0")
   "//"))0